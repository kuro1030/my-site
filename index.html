<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>じゃんけん勝負！</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>じゃんけんしよっ🎮</h1>
  <button id="btn-gu">✊ グー</button>
  <button id="btn-choki">✌️ チョキ</button>
  <button id="btn-pa">🖐️ パー</button>

  <div id="result"></div>

  <div id="score">
    <p>🎉 勝ち：<span id="win">0</span></p>
    <p>😖 負け：<span id="lose">0</span></p>
    <p>🤝 あいこ：<span id="draw">0</span></p>
  </div>

  <button id="reset">記録をリセット</button>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      let score = {
        win: parseInt(localStorage.getItem('win')) || 0,
        lose: parseInt(localStorage.getItem('lose')) || 0,
        draw: parseInt(localStorage.getItem('draw')) || 0
      };

      function updateDisplay() {
        document.getElementById('win').innerText = score.win;
        document.getElementById('lose').innerText = score.lose;
        document.getElementById('draw').innerText = score.draw;
      }

      function play(player) {
        const hands = ['グー', 'チョキ', 'パー'];
        const cpu = hands[Math.floor(Math.random() * 3)];
        let resultText = '';

        if (player === cpu) {
          resultText = `🤝 あいこ！相手も ${cpu} だったよ〜`;
          score.draw++;
        } else if (
          (player === 'グー' && cpu === 'チョキ') ||
          (player === 'チョキ' && cpu === 'パー') ||
          (player === 'パー' && cpu === 'グー')
        ) {
          resultText = `🎉 勝ち！相手は ${cpu} だったよ！`;
          score.win++;
        } else {
          resultText = `😖 負けちゃった…相手は ${cpu} だったよ`;
          score.lose++;
        }

        const resultDiv = document.getElementById('result');
        resultDiv.innerText = resultText;
        resultDiv.classList.remove('animate');
        void resultDiv.offsetWidth;
        resultDiv.classList.add('animate');

        saveScore();
        updateDisplay();
      }

      function saveScore() {
        localStorage.setItem('win', score.win);
        localStorage.setItem('lose', score.lose);
        localStorage.setItem('draw', score.draw);
      }

      function resetScore() {
        if (confirm('記録をリセットしますか？')) {
          localStorage.removeItem('win');
          localStorage.removeItem('lose');
          localStorage.removeItem('draw');
          score = { win: 0, lose: 0, draw: 0 };
          updateDisplay();
          document.getElementById('result').innerText = '記録をリセットしたよ！';
        }
      }

      document.getElementById('btn-gu').addEventListener('click', () => play('グー'));
      document.getElementById('btn-choki').addEventListener('click', () => play('チョキ'));
      document.getElementById('btn-pa').addEventListener('click', () => play('パー'));
      document.getElementById('reset').addEventListener('click', resetScore);

      updateDisplay();
    });
  </script>
</body>
</html>
