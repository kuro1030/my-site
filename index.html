<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ã˜ã‚ƒã‚“ã‘ã‚“å‹è² ï¼</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>ã˜ã‚ƒã‚“ã‘ã‚“ã—ã‚ˆã£ğŸ®</h1>
  <button id="btn-gu">âœŠ ã‚°ãƒ¼</button>
  <button id="btn-choki">âœŒï¸ ãƒãƒ§ã‚­</button>
  <button id="btn-pa">ğŸ–ï¸ ãƒ‘ãƒ¼</button>

  <div id="result"></div>

  <div id="score">
    <p>ğŸ‰ å‹ã¡ï¼š<span id="win">0</span></p>
    <p>ğŸ˜– è² ã‘ï¼š<span id="lose">0</span></p>
    <p>ğŸ¤ ã‚ã„ã“ï¼š<span id="draw">0</span></p>
  </div>

  <button id="reset">è¨˜éŒ²ã‚’ãƒªã‚»ãƒƒãƒˆ</button>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      let score = {
        win: parseInt(localStorage.getItem('win')) || 0,
        lose: parseInt(localStorage.getItem('lose')) || 0,
        draw: parseInt(localStorage.getItem('draw')) || 0
      };

      function updateDisplay() {
        document.getElementById('win').innerText = score.win;
        document.getElementById('lose').innerText = score.lose;
        document.getElementById('draw').innerText = score.draw;
      }

      function play(player) {
        const hands = ['ã‚°ãƒ¼', 'ãƒãƒ§ã‚­', 'ãƒ‘ãƒ¼'];
        const cpu = hands[Math.floor(Math.random() * 3)];
        let resultText = '';

        if (player === cpu) {
          resultText = `ğŸ¤ ã‚ã„ã“ï¼ç›¸æ‰‹ã‚‚ ${cpu} ã ã£ãŸã‚ˆã€œ`;
          score.draw++;
        } else if (
          (player === 'ã‚°ãƒ¼' && cpu === 'ãƒãƒ§ã‚­') ||
          (player === 'ãƒãƒ§ã‚­' && cpu === 'ãƒ‘ãƒ¼') ||
          (player === 'ãƒ‘ãƒ¼' && cpu === 'ã‚°ãƒ¼')
        ) {
          resultText = `ğŸ‰ å‹ã¡ï¼ç›¸æ‰‹ã¯ ${cpu} ã ã£ãŸã‚ˆï¼`;
          score.win++;
        } else {
          resultText = `ğŸ˜– è² ã‘ã¡ã‚ƒã£ãŸâ€¦ç›¸æ‰‹ã¯ ${cpu} ã ã£ãŸã‚ˆ`;
          score.lose++;
        }

        const resultDiv = document.getElementById('result');
        resultDiv.innerText = resultText;
        resultDiv.classList.remove('animate');
        void resultDiv.offsetWidth;
        resultDiv.classList.add('animate');

        saveScore();
        updateDisplay();
      }

      function saveScore() {
        localStorage.setItem('win', score.win);
        localStorage.setItem('lose', score.lose);
        localStorage.setItem('draw', score.draw);
      }

      function resetScore() {
        if (confirm('è¨˜éŒ²ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
          localStorage.removeItem('win');
          localStorage.removeItem('lose');
          localStorage.removeItem('draw');
          score = { win: 0, lose: 0, draw: 0 };
          updateDisplay();
          document.getElementById('result').innerText = 'è¨˜éŒ²ã‚’ãƒªã‚»ãƒƒãƒˆã—ãŸã‚ˆï¼';
        }
      }

      document.getElementById('btn-gu').addEventListener('click', () => play('ã‚°ãƒ¼'));
      document.getElementById('btn-choki').addEventListener('click', () => play('ãƒãƒ§ã‚­'));
      document.getElementById('btn-pa').addEventListener('click', () => play('ãƒ‘ãƒ¼'));
      document.getElementById('reset').addEventListener('click', resetScore);

      updateDisplay();
    });
  </script>
</body>
</html>
